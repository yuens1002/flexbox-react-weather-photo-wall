(this["webpackJsonpweather-geo-photo-wall-app"]=this["webpackJsonpweather-geo-photo-wall-app"]||[]).push([[0],{49:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r,a,c,o=n(1),i=n.n(o),s=n(35),l=n.n(s),u=n(17),d=n(4),h=(n(49),n(10)),b=n(7),p="primary",j="secondary",g="tertiary",m="white",f="black",O=n(9),y=(c={},Object(O.a)(c,m,{background:[255,255,255],color:[7,7,7],placeholder:.6,link:{link:.5,visited:.3,hover:1},highlight:(r={},Object(O.a)(r,p,[144,190,109]),Object(O.a)(r,j,[133,255,199]),Object(O.a)(r,g,[247,231,51]),r)}),Object(O.a)(c,f,{background:[0,0,0],color:[224,224,224],placeholder:.6,link:{link:.5,visited:.3,hover:1},highlight:(a={},Object(O.a)(a,p,[129,178,154]),Object(O.a)(a,j,[64,188,216]),Object(O.a)(a,g,[144,190,109]),a)}),c);function x(e){var t=[p,j,g],n=t.length-1,r=Math.floor(Math.random()*(n-0+1)+0);return y[e].highlight[t[r]]}function v(e,t){return t?"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(t,")"):"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")")}var w,k=n(2),S=b.c.div(w||(w=Object(h.a)(["\n  display: flex;\n  flex-flow: column wrap;\n  background-color: ",";\n  height: 100%;\n\n  .card-img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  .card-img-frame {\n    height: 240px;\n    min-width: calc(33% - 6px);\n  }\n\n  .card-body {\n    padding: 8px;\n    font-size: 1.6rem;\n    font-weight: 300;\n    width: 100%;\n  }\n\n  .card-body-header {\n    font-size: 2rem;\n    font-family: 'Pacifico', cursive;\n  }\n\n  .card-body-text-summary {\n    text-transform: capitalize;\n  }\n\n  .card-body-credits {\n    float: right;\n    font-size: 1rem;\n  }\n\n  .card-body-header::before {\n    content: '';\n    clear: both;\n    display: table;\n  }\n"])),(function(e){return v(e.theme.background,.85)}));function N(e){var t=e.cardData,n=t.user,r=t.urls,a=t.description,c=t.temp,o=t.name,i=t.summary,s=t.state,l=e.cardStyle;return Object(k.jsxs)(S,{style:l,children:[Object(k.jsx)("div",{className:"card-img-frame",children:Object(k.jsx)("img",{className:"card-img",src:r.regular,alt:a})}),Object(k.jsxs)("div",{className:"card-body",children:[Object(k.jsxs)("div",{className:"card-body-credits",children:[Object(k.jsx)("span",{children:"photo by "}),Object(k.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://unsplash.com/@".concat(n.username),children:n.name})]}),Object(k.jsxs)("div",{className:"card-body-header",children:[o,", ",s]}),Object(k.jsxs)("div",{className:"card-body-text",children:[Object(k.jsx)("span",{className:"card-body-text-summary",children:i}),", ",c,"\xb0 C"]})]})]})}n(52);function z(e,t){switch(t.type){case"updateCardSize":return Object(d.a)(Object(d.a)({},e),{},{cardSize:window.getComputedStyle(e.gridItem.current).width});case"updateCardStyle":return Object(d.a)(Object(d.a)({},e),{},{cardStyle:(n=e.cardSize,Number(n.slice(0,-2))>534?{flexFlow:"row nowrap"}:{})});default:return e}var n}var C=n(43),D={maxWidth:"100%",display:"flex",alignItems:"center",justifyContent:"space-around"};function E(e,t){switch(t.type){case"updateWeatherData":return Object(d.a)(Object(d.a)({},e),{},{weatherData:[t.payload].concat(Object(C.a)(e.weatherData))});case"updateContainerStyle":return Object(d.a)(Object(d.a)({},e),{},{containerStyle:e.weatherData.length?{}:D});case"updateBgStyle":return Object(d.a)(Object(d.a)({},e),{},{bgStyle:{backgroundImage:"url(".concat(e.image.urls.regular,")"),backgroundSize:"cover"}});case"updateImage":return console.log("updateImage action called"),Object(d.a)(Object(d.a)({},e),{},{image:t.payload});default:return e}}function I(e){var t=Object(o.useRef)(0),n={cardStyle:{},cardSize:"",gridItem:t},r=Object(o.useReducer)(z,n),a=Object(u.a)(r,2),c=a[0],i=a[1];return Object(o.useLayoutEffect)((function(){function e(){i({type:"updateCardSize"})}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(o.useEffect)((function(){i({type:"updateCardSize"}),i({type:"updateCardStyle"})}),[c.cardSize]),Object(k.jsx)("div",{className:"grid-item",ref:t,children:Object(k.jsx)(N,Object(d.a)(Object(d.a)({},e),{},{cardStyle:c.cardStyle}))})}n(53);function q(e){var t=e.weatherData;return Object(k.jsx)("div",{className:"grid-row",children:t.map((function(e,t){return Object(k.jsx)(I,{cardData:e},e.id+t)}))})}var R=n(13),F=n.n(R),P=n(16),T=n(22),M=n.n(T),W="https://api.openweathermap.org/data/2.5/weather",B="f59e59a816bb552a4355e70835db0dd0";function L(e){return J.apply(this,arguments)}function J(){return(J=Object(P.a)(F.a.mark((function e(t){var n,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M()("".concat(W,"?q=").concat(t,"&appid=").concat(B,"&units=metric"));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var Q=n(39),A=Object(Q.a)({accessKey:"wy2i3AoRXtAx-S4XwrdU1g8Bf98XPsJ8jujDUYfaiWo"}),K={orientation:"landscape",per_page:1};function U(e){return K=Object(d.a)(Object(d.a)({},K),{},{query:e}),A.search.getPhotos(K).then((function(e){if("error"===e.type)throw Error(e.errors[0]);return e.response.results})).catch((function(e){return console.log(e)}))}var X,Y="http://open.mapquestapi.com/geocoding/v1/reverse?",_="0aSgK7RwJNt2FH7Zaq65yPQYKlywr3QY";function G(e){return H.apply(this,arguments)}function H(){return(H=Object(P.a)(F.a.mark((function e(t){var n,r,a,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lat,r=t.lng,e.prev=1,e.next=4,M()("".concat(Y,"key=").concat(_,"&location=").concat(n,", ").concat(r));case 4:if(a=e.sent,0===(c=a.data).info.statuscode){e.next=8;break}throw Error(c.info.message);case 8:return e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}var Z,V=b.c.form(X||(X=Object(h.a)(["\n  padding: 0 12px;\n  display: inline-block;\n  .query-input {\n    font-size: 2rem;\n    text-align: center;\n    font-style: italic;\n    padding: 10px;\n    width: 250px;\n    background-color: ",";\n    border: none;\n    margin: 10px auto;\n    transition: background-color 0.8s ease;\n    :focus {\n      background-color: ",";\n    }\n    ::placeholder {\n      color: ",";\n    }\n  }\n"])),(function(e){return v(e.theme.highlight,.8)}),(function(e){var t=e.theme;return v(t.highlight,t.link.hover)}),(function(e){var t=e.theme;return v(t.color,t.link.link)})),$=Object(o.memo)((function(e){var t=e.updateWeatherData;console.log("rendering Query...");var n=Object(o.useRef)(null),r=Object(o.useState)("(enter) a US city"),a=Object(u.a)(r,2),c=a[0],i=a[1];function s(){return(s=Object(P.a)(F.a.mark((function e(r){var a,c,o,s,l,u,d,h,b,p,j;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=n.current.value.trim(),n.current.value="",i("momento..."),e.next=6,L(a);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:if(c=e.t0,(o=0===Object.keys(c).length)&&i("city not found!"),o){e.next=20;break}return i(a),s=c.name,l=c.weather,u=c.main,d=c.coord,h=d.lat,b=d.lon,e.next=17,G({lat:h,lng:b});case 17:p=e.sent,j=p.results[0].locations[0].adminArea3,U("".concat(s,", ").concat(j," ").concat(l[0].description)).then((function(e){var n=e[0]||{},r=n.user,a=n.urls,c=n.description,o=n.id;t({user:r,urls:a,description:c,name:s,id:o,state:j,temp:u.temp,summary:l[0].description,imgSrc:"http://openweathermap.org/img/wn/".concat(l[0].icon,".png")})}));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(k.jsx)(V,{id:"query-form",onSubmit:function(e){return s.apply(this,arguments)},className:"query",autoComplete:"off",children:Object(k.jsx)("input",{ref:n,title:"query",placeholder:c,className:"query-input",type:"text"})})})),ee=n(75);function te(e){var t=e.dispatch,n=e.currentTheme,r=Object(ee.a)("getRandomPic",(function(){return function(e){return A.photos.getRandom({query:"".concat(e," background")}).then((function(e){return e.response}))}(n)}),{refetchInterval:18e4,refetchOnWindowFocus:!1,onSuccess:function(e){var n=e.urls,r=e.user;t({type:"updateImage",payload:{urls:n,user:r}}),t({type:"updateBgStyle"})},onError:function(e){console.log("error from useRandomPic hook: ",e)}});return{error:r.error,isError:r.isError}}var ne,re=b.c.div(Z||(Z=Object(h.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: ",";\n  }\n"])),(function(e){return v(e.theme.background,.4)}));function ae(e){return Object(k.jsx)(re,Object(d.a)(Object(d.a)({},e),{},{children:e.children}))}var ce,oe=Object(b.b)(ne||(ne=Object(h.a)(["\n*, *::before, *::after {\n  box-sizing: border-box;\n}\n\nhtml {\n  font-size: 10px;\n  color: ",";\n}\n\nbody {\n  margin: 0;\n  padding: 0;\n  font-family: 'Open Sans', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\na:link {\n  color: ",";\n  text-decoration: none;\n  padding: 0 4px;\n  transition: background-color 0.5s ease;\n  background-color: ",";\n}\n\na:visited {\n  color: ",";\n}\n\na:hover {\n  background-color: ",";\n}\n\na:focus {\n  background-color: ",";\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n"])),(function(e){return v(e.theme.color)}),(function(e){return v(e.theme.color)}),(function(e){return v(e.theme.highlight,e.theme.link.link)}),(function(e){return v(e.theme.color)}),(function(e){return v(e.theme.highlight,e.theme.link.hover)}),(function(e){return v(e.theme.highlight,e.theme.link.focus)})),ie=b.c.div(ce||(ce=Object(h.a)(["\n  position: absolute;\n  top: 8px;\n  right: 16px;\n  display: flex;\n  justifiy-content: space-between;\n  width: 124px;\n  align-items: center;\n\n  .circle {\n    cursor: pointer;\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    margin: 4px;\n  }\n  .circle--dark {\n    background-color: rgba(0, 0, 0, 0.8);\n    border: 2px solid rgba(255, 255, 255, 0.2);\n  }\n  .circle--light {\n    background-color: rgba(255, 255, 255, 0.8);\n    border: 2px solid rgba(0, 0, 0, 0.2);\n  }\n  .circle--selected {\n    border: 2px solid ",";\n  }\n"])),(function(e){return v(e.theme.highlight)}));function se(){return Object(k.jsxs)(ie,{children:[Object(k.jsx)("span",{children:"Choose a Theme: "}),Object(k.jsx)("div",{className:"circle circle--dark circle--selected","aria-label":"dark theme, hit enter to select"}),Object(k.jsx)("div",{className:"circle circle--light","aria-label":"light theme, hit enter to select"})]})}var le,ue=function(){var e=[m,f],t=e.length-1;return e[Math.floor(Math.random()*(t-0+1)+0)]}(),de=Object(d.a)(Object(d.a)({},{weatherData:[],containerStyle:{},image:{urls:{},user:{}},bgStyle:{}}),{},{currentTheme:ue,theme:(le=ue,Object(d.a)(Object(d.a)({},y[le]),{},{highlight:x(le)}))});var he=function(){console.log("rendering app...");var e=Object(o.useReducer)(E,de),t=Object(u.a)(e,2),n=t[0],r=n.weatherData,a=n.containerStyle,c=n.image,i=n.bgStyle,s=n.theme,l=n.currentTheme,d=t[1],h=te({dispatch:d,currentTheme:l}),p=h.isError,j=h.error,g=Object(o.useCallback)((function(e){d({type:"updateWeatherData",payload:e})}),[]);return Object(o.useEffect)((function(){r.length<=1&&d({type:"updateContainerStyle"})}),[r.length]),Object(k.jsx)(b.a,{theme:s,children:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(oe,{}),Object(k.jsxs)(ae,{style:i,children:[Object(k.jsx)(se,{}),Object(k.jsxs)("div",{className:"container",style:a,children:[Object(k.jsxs)("div",{className:"heading",children:[Object(k.jsx)("div",{children:"The weather in"}),Object(k.jsx)("div",{children:Object(k.jsx)($,{updateWeatherData:g})}),Object(k.jsx)("div",{children:"is like?"})]}),r.length>0&&Object(k.jsx)(q,{weatherData:r})]}),Object(k.jsxs)("div",{className:"credits",children:[p&&Object(k.jsx)("span",{children:j.message}),Object.keys(c.urls).length>0&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("span",{children:"BG photo by "}),Object(k.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://unsplash.com/@".concat(c.user.username),children:c.user.name})]})]})]})]})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,76)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},pe=n(74),je=n(41),ge=n(42),me=new pe.a;l.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsxs)(je.a,{client:me,children:[Object(k.jsx)(he,{}),Object(k.jsx)(ge.ReactQueryDevtools,{initialIsOpen:!1})]})}),document.getElementById("root")),be()}},[[72,1,2]]]);
//# sourceMappingURL=main.aa18b966.chunk.js.map