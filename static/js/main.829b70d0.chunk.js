(this["webpackJsonpweather-geo-photo-wall-app"]=this["webpackJsonpweather-geo-photo-wall-app"]||[]).push([[0],{49:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r,a,c,o=n(1),i=n.n(o),s=n(35),l=n.n(s),u=n(17),d=n(4),h=(n(49),n(11)),b=n(8),p="primary",m="secondary",j="tertiary",g="white",f="black",O=n(6),y=(c={},Object(O.a)(c,g,{background:[255,255,255],color:[7,7,7],placeholder:.6,link:{link:.5,visited:.3,hover:1},highlight:(r={},Object(O.a)(r,p,[144,190,109]),Object(O.a)(r,m,[133,255,199]),Object(O.a)(r,j,[247,231,51]),Object(O.a)(r,"light Cyan",[224,251,252]),Object(O.a)(r,"light Green",[124,234,156]),Object(O.a)(r,"Languid Lanvendor",[220,207,236]),Object(O.a)(r,"Bright Yellow Crayola",[252,171,16]),r)}),Object(O.a)(c,f,{background:[0,0,0],color:[224,224,224],placeholder:.6,link:{link:.5,visited:.3,hover:1},highlight:(a={},Object(O.a)(a,p,[129,178,154]),Object(O.a)(a,m,[64,188,216]),Object(O.a)(a,j,[144,190,109]),Object(O.a)(a,"Denim",[46,94,170]),Object(O.a)(a,"English Violet",[89,57,89]),Object(O.a)(a,"Bule Munsell",[43,158,179]),Object(O.a)(a,"Red Sala",[248,51,60]),a)}),c);function x(e){var t=Object.keys(y[e].highlight),n=t.length-1,r=Math.floor(Math.random()*(n-0+1)+0);return y[e].highlight[t[r]]}function v(e,t){return t?"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(t,")"):"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")")}function w(e){return Object(d.a)(Object(d.a)({},y[e]),{},{highlight:x(e)})}var k,S=n(2),C=b.c.div(k||(k=Object(h.a)(["\n  display: flex;\n  flex-flow: column wrap;\n  background-color: ",";\n  height: 100%;\n\n  .card-img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  .card-img-frame {\n    height: 240px;\n    min-width: calc(33% - 6px);\n  }\n\n  .card-body {\n    padding: 8px;\n    font-size: 1.6rem;\n    font-weight: 300;\n    width: 100%;\n  }\n\n  .card-body-header {\n    font-size: 2rem;\n    font-family: 'Pacifico', cursive;\n  }\n\n  .card-body-text-summary {\n    text-transform: capitalize;\n  }\n\n  .card-body-credits {\n    float: right;\n    font-size: 1rem;\n  }\n\n  .card-body-header::before {\n    content: '';\n    clear: both;\n    display: table;\n  }\n"])),(function(e){return v(e.theme.background,.85)}));function T(e){var t=e.cardData,n=t.user,r=t.urls,a=t.description,c=t.temp,o=t.name,i=t.summary,s=t.state,l=e.cardStyle;return Object(S.jsxs)(C,{style:l,children:[Object(S.jsx)("div",{className:"card-img-frame",children:Object(S.jsx)("img",{className:"card-img",src:r.regular,alt:a})}),Object(S.jsxs)("div",{className:"card-body",children:[Object(S.jsxs)("div",{className:"card-body-credits",children:[Object(S.jsx)("span",{children:"photo by "}),Object(S.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://unsplash.com/@".concat(n.username),children:n.name})]}),Object(S.jsxs)("div",{className:"card-body-header",children:[o,", ",s]}),Object(S.jsxs)("div",{className:"card-body-text",children:[Object(S.jsx)("span",{className:"card-body-text-summary",children:i}),", ",c,"\xb0 C"]})]})]})}n(52);function N(e,t){switch(t.type){case"updateCardSize":return Object(d.a)(Object(d.a)({},e),{},{cardSize:window.getComputedStyle(e.gridItem.current).width});case"updateCardStyle":return Object(d.a)(Object(d.a)({},e),{},{cardStyle:(n=e.cardSize,Number(n.slice(0,-2))>534?{flexFlow:"row nowrap"}:{})});default:return e}var n}var z=n(43),D={maxWidth:"100%",display:"flex",alignItems:"center",justifyContent:"space-around"};function I(e,t){switch(t.type){case"updateWeatherData":return Object(d.a)(Object(d.a)({},e),{},{weatherData:[t.payload].concat(Object(z.a)(e.weatherData))});case"updateContainerStyle":return Object(d.a)(Object(d.a)({},e),{},{containerStyle:e.weatherData.length?{}:D});case"updateBgStyle":return Object(d.a)(Object(d.a)({},e),{},{bgStyle:{backgroundImage:"url(".concat(e.image.urls.regular,")"),backgroundSize:"cover"}});case"updateImage":return console.log("updateImage action called"),Object(d.a)(Object(d.a)({},e),{},{image:t.payload});case"updateCurrentTheme":return Object(d.a)(Object(d.a)({},e),{},{currentTheme:t.payload});case"updateTheme":return Object(d.a)(Object(d.a)({},e),{},{theme:w(e.currentTheme)});default:return e}}function R(e){var t=Object(o.useRef)(0),n={cardStyle:{},cardSize:"",gridItem:t},r=Object(o.useReducer)(N,n),a=Object(u.a)(r,2),c=a[0],i=a[1];return Object(o.useLayoutEffect)((function(){function e(){i({type:"updateCardSize"})}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(o.useEffect)((function(){i({type:"updateCardSize"}),i({type:"updateCardStyle"})}),[c.cardSize]),Object(S.jsx)("div",{className:"grid-item",ref:t,children:Object(S.jsx)(T,Object(d.a)(Object(d.a)({},e),{},{cardStyle:c.cardStyle}))})}n(53);function E(e){var t=e.weatherData;return Object(S.jsx)("div",{className:"grid-row",children:t.map((function(e,t){return Object(S.jsx)(R,{cardData:e},e.id+t)}))})}var P=n(9),q=n.n(P),B=n(14),F=n(22),M=n.n(F),L="https://api.openweathermap.org/data/2.5/weather",W="f59e59a816bb552a4355e70835db0dd0";function A(e){return J.apply(this,arguments)}function J(){return(J=Object(B.a)(q.a.mark((function e(t){var n,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M()("".concat(L,"?q=").concat(t,"&appid=").concat(W,"&units=metric"));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var Q=n(39),Y=Object(Q.a)({accessKey:"wy2i3AoRXtAx-S4XwrdU1g8Bf98XPsJ8jujDUYfaiWo"}),G={orientation:"landscape",per_page:1};function K(e){return G=Object(d.a)(Object(d.a)({},G),{},{query:e}),Y.search.getPhotos(G).then((function(e){if("error"===e.type)throw Error(e.errors[0]);return e.response.results})).catch((function(e){return console.log(e)}))}var U,X="http://open.mapquestapi.com/geocoding/v1/reverse?",_="0aSgK7RwJNt2FH7Zaq65yPQYKlywr3QY";function H(e){return V.apply(this,arguments)}function V(){return(V=Object(B.a)(q.a.mark((function e(t){var n,r,a,c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lat,r=t.lng,e.prev=1,e.next=4,M()("".concat(X,"key=").concat(_,"&location=").concat(n,", ").concat(r));case 4:if(a=e.sent,0===(c=a.data).info.statuscode){e.next=8;break}throw Error(c.info.message);case 8:return e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}var Z,$=b.c.form(U||(U=Object(h.a)(["\n  padding: 0 12px;\n  display: inline-block;\n  .query-input {\n    font-size: 2rem;\n    text-align: center;\n    font-style: italic;\n    padding: 10px;\n    width: 250px;\n    background-color: ",";\n    border: none;\n    margin: 10px auto;\n    transition: background-color 0.8s ease;\n    :focus {\n      background-color: ",";\n    }\n    ::placeholder {\n      color: ",";\n    }\n  }\n"])),(function(e){return v(e.theme.highlight,.8)}),(function(e){var t=e.theme;return v(t.highlight,t.link.hover)}),(function(e){var t=e.theme;return v(t.color,t.link.link)})),ee=Object(o.memo)((function(e){var t=e.updateWeatherData;console.log("rendering Query...");var n=Object(o.useRef)(null),r=Object(o.useState)("(enter) a US city"),a=Object(u.a)(r,2),c=a[0],i=a[1];function s(){return(s=Object(B.a)(q.a.mark((function e(r){var a,c,o,s,l,u,d,h,b,p,m;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=n.current.value.trim(),n.current.value="",i("momento..."),e.next=6,A(a);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:if(c=e.t0,(o=0===Object.keys(c).length)&&i("city not found!"),o){e.next=20;break}return i(a),s=c.name,l=c.weather,u=c.main,d=c.coord,h=d.lat,b=d.lon,e.next=17,H({lat:h,lng:b});case 17:p=e.sent,m=p.results[0].locations[0].adminArea3,K("".concat(s,", ").concat(m," ").concat(l[0].description)).then((function(e){var n=e[0]||{},r=n.user,a=n.urls,c=n.description,o=n.id;t({user:r,urls:a,description:c,name:s,id:o,state:m,temp:u.temp,summary:l[0].description,imgSrc:"http://openweathermap.org/img/wn/".concat(l[0].icon,".png")})}));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(S.jsx)($,{id:"query-form",onSubmit:function(e){return s.apply(this,arguments)},className:"query",autoComplete:"off",children:Object(S.jsx)("input",{ref:n,title:"query",placeholder:c,className:"query-input",type:"text"})})})),te=n(75);function ne(e){var t=e.dispatch,n=e.currentTheme;console.log("\ud83d\ude80 ~ file: useRandomPic.js ~ line 5 ~ useGetRandomPic ~ currentTheme",n);var r=Object(te.a)(["getRandomPic",n],(function(){return function(e){return console.log("\ud83d\ude80 ~ file: unsplashAPI.js ~ line 24 ~ getRandom ~ currentTheme",e),Y.photos.getRandom({query:"".concat(e," background")}).then((function(e){return e.response}))}(n)}),{refetchInterval:18e4,refetchOnWindowFocus:!1,onSuccess:function(e){var n=e.urls,r=e.user;t({type:"updateImage",payload:{urls:n,user:r}}),t({type:"updateBgStyle"})},onError:function(e){console.log("error from useRandomPic hook: ",e)}});return{error:r.error,isError:r.isError,refetch:r.refetch}}var re,ae=b.c.div(Z||(Z=Object(h.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: ",";\n  }\n"])),(function(e){return v(e.theme.background,.4)}));function ce(e){return Object(S.jsx)(ae,Object(d.a)(Object(d.a)({},e),{},{children:e.children}))}var oe,ie=Object(b.b)(re||(re=Object(h.a)(["\n*, *::before, *::after {\n  box-sizing: border-box;\n}\n\nhtml {\n  font-size: 10px;\n  color: ",";\n}\n\nbody {\n  margin: 0;\n  padding: 0;\n  font-family: 'Open Sans', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\na:link {\n  color: ",";\n  text-decoration: none;\n  padding: 0 4px;\n  transition: background-color 0.5s ease;\n  background-color: ",";\n}\n\na:visited {\n  color: ",";\n}\n\na:hover {\n  background-color: ",";\n}\n\na:focus {\n  background-color: ",";\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n"])),(function(e){return v(e.theme.color)}),(function(e){return v(e.theme.color)}),(function(e){return v(e.theme.highlight,e.theme.link.link)}),(function(e){return v(e.theme.color)}),(function(e){return v(e.theme.highlight,e.theme.link.hover)}),(function(e){return v(e.theme.highlight,e.theme.link.focus)})),se=b.c.div(oe||(oe=Object(h.a)(["\n  position: absolute;\n  top: 8px;\n  right: 16px;\n  display: flex;\n  justifiy-content: space-between;\n  width: 124px;\n  align-items: center;\n\n  .circle {\n    cursor: pointer;\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    margin: 4px;\n  }\n  .circle--dark {\n    background-color: rgba(0, 0, 0, 0.8);\n    border: 2px solid rgba(255, 255, 255, 0.2);\n  }\n  .circle--light {\n    background-color: rgba(255, 255, 255, 0.8);\n    border: 2px solid rgba(0, 0, 0, 0.2);\n  }\n  .circle--selected {\n    border: 2px solid ",";\n  }\n"])),(function(e){return v(e.theme.highlight)})),le=Object(o.memo)((function(e){var t=e.updateCurrentTheme,n=e.updateTheme,r=e.currentTheme,a=(e.refetchBgImage,function(){var e=Object(B.a)(q.a.mark((function e(a){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleThemeToggle clicked"),a!==r&&t(a),n();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c=function(e){return console.log("theme",e),console.log("currentTheme",r),r===e?" circle--selected":""};return Object(S.jsxs)(se,{children:[Object(S.jsx)("span",{children:"Choose a Theme: "}),Object(S.jsx)("div",{className:"circle circle--dark".concat(c(f)),"aria-label":"dark theme, hit enter to select",onClick:function(){return a(f)}}),Object(S.jsx)("div",{className:"circle circle--light".concat(c(g)),"aria-label":"light theme, hit enter to select",onClick:function(){return a(g)}})]})})),ue=function(){var e=[g,f],t=e.length-1;return e[Math.floor(Math.random()*(t-0+1)+0)]}(),de=Object(d.a)(Object(d.a)({},{weatherData:[],containerStyle:{},image:{urls:{},user:{}},bgStyle:{}}),{},{currentTheme:ue,theme:w(ue)});var he=function(){console.log("rendering app...");var e=Object(o.useReducer)(I,de),t=Object(u.a)(e,2),n=t[0],r=n.weatherData,a=n.containerStyle,c=n.image,i=n.bgStyle,s=n.theme,l=n.currentTheme,d=t[1],h=ne({dispatch:d,currentTheme:l}),p=h.isError,m=h.error,j=h.refetch,g=Object(o.useCallback)((function(e){d({type:"updateWeatherData",payload:e})}),[]),f=Object(o.useCallback)((function(e){d({type:"updateCurrentTheme",payload:e})}),[]),O=Object(o.useCallback)((function(){d({type:"updateTheme"})}),[]);return Object(o.useEffect)((function(){r.length<=1&&d({type:"updateContainerStyle"})}),[r.length]),Object(S.jsx)(b.a,{theme:s,children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ie,{}),Object(S.jsxs)(ce,{style:i,children:[Object(S.jsxs)("div",{className:"container",style:a,children:[Object(S.jsxs)("div",{className:"heading",children:[Object(S.jsx)("div",{children:"The weather in"}),Object(S.jsx)("div",{children:Object(S.jsx)(ee,{updateWeatherData:g})}),Object(S.jsx)("div",{children:"is like?"})]}),r.length>0&&Object(S.jsx)(E,{weatherData:r})]}),Object(S.jsxs)("div",{className:"credits",children:[p&&Object(S.jsx)("span",{children:m.message}),Object.keys(c.urls).length>0&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{children:"BG photo by "}),Object(S.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://unsplash.com/@".concat(c.user.username),children:c.user.name})]})]}),Object(S.jsx)(le,{updateCurrentTheme:f,updateTheme:O,currentTheme:l,refetchBgImage:j})]})]})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,76)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},pe=n(74),me=n(41),je=n(42),ge=new pe.a;l.a.render(Object(S.jsx)(i.a.StrictMode,{children:Object(S.jsxs)(me.a,{client:ge,children:[Object(S.jsx)(he,{}),Object(S.jsx)(je.ReactQueryDevtools,{initialIsOpen:!1})]})}),document.getElementById("root")),be()}},[[72,1,2]]]);
//# sourceMappingURL=main.829b70d0.chunk.js.map